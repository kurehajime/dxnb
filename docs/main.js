/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/cell.ts":
/*!*********************!*\
  !*** ./src/cell.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Cell\": () => (/* binding */ Cell)\n/* harmony export */ });\n/* harmony import */ var _params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./params */ \"./src/params.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar Cell = /** @class */ (function (_super) {\r\n    __extends(Cell, _super);\r\n    function Cell(suit, color) {\r\n        var _this = _super.call(this) || this;\r\n        _this.State = _params__WEBPACK_IMPORTED_MODULE_0__.State.Live;\r\n        _this.IsHold = false;\r\n        _this.Life = 0;\r\n        _this.Suit = suit;\r\n        _this.Color = color;\r\n        _this.Draw();\r\n        return _this;\r\n    }\r\n    Cell.prototype.Draw = function () {\r\n        var suit;\r\n        var color;\r\n        this.removeAllChildren();\r\n        if (this.State === _params__WEBPACK_IMPORTED_MODULE_0__.State.Delete) {\r\n            return;\r\n        }\r\n        switch (this.Suit) {\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Suit.North:\r\n                suit = \"北\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Suit.East:\r\n                suit = \"東\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Suit.West:\r\n                suit = \"西\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Suit.South:\r\n                suit = \"南\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Suit.Wild:\r\n                suit = \"＊\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        switch (this.Color) {\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Color.Red:\r\n                color = \"DarkRed\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Color.Green:\r\n                color = \"DarkGreen\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Color.Blue:\r\n                color = \"DarkBlue\";\r\n                break;\r\n            case _params__WEBPACK_IMPORTED_MODULE_0__.Color.Rainbow:\r\n                color = \"Black\";\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        var shape1 = new createjs.Shape();\r\n        shape1.graphics.beginFill(color);\r\n        shape1.graphics.drawRoundRect(5, 5, 45, 45, 5);\r\n        if (this.IsHold) {\r\n            var shadow = new createjs.Shadow(\"#ffff00\", 0, 0, 15);\r\n            shape1.shadow = shadow;\r\n        }\r\n        var word = new createjs.Text(suit, \"24px serif\", \"White\");\r\n        word.textAlign = \"center\";\r\n        word.x = 27;\r\n        word.y = 15;\r\n        if (this.State === _params__WEBPACK_IMPORTED_MODULE_0__.State.Flash) {\r\n            this.alpha = 0.7;\r\n        }\r\n        else {\r\n            this.alpha = 1;\r\n        }\r\n        this.addChild(shape1);\r\n        this.addChild(word);\r\n    };\r\n    Cell.prototype.Override = function (cell) {\r\n        this.Suit = cell.Suit;\r\n        this.Color = cell.Color;\r\n        this.State = cell.State;\r\n        this.IsHold = cell.IsHold;\r\n    };\r\n    return Cell;\r\n}(createjs.Container));\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/cell.ts?");

/***/ }),

/***/ "./src/cover.ts":
/*!**********************!*\
  !*** ./src/cover.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Cover\": () => (/* binding */ Cover)\n/* harmony export */ });\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Cover = /** @class */ (function (_super) {\r\n    __extends(Cover, _super);\r\n    function Cover() {\r\n        var _this = _super.call(this) || this;\r\n        _this.Draw();\r\n        return _this;\r\n    }\r\n    Cover.prototype.Draw = function () {\r\n        this.removeAllChildren();\r\n        var color = \"black\";\r\n        var cover = new createjs.Shape();\r\n        cover.graphics.beginFill(color);\r\n        cover.graphics.drawRect(0, 0, 300, 535);\r\n        cover.alpha = 0.5;\r\n        this.addChild(cover);\r\n    };\r\n    Cover.prototype.UnDraw = function () {\r\n        this.removeAllChildren();\r\n    };\r\n    return Cover;\r\n}(createjs.Container));\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/cover.ts?");

/***/ }),

/***/ "./src/eventManager.ts":
/*!*****************************!*\
  !*** ./src/eventManager.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EventManager\": () => (/* binding */ EventManager)\n/* harmony export */ });\nvar EventManager = /** @class */ (function () {\r\n    function EventManager() {\r\n        this.actions = [];\r\n    }\r\n    EventManager.prototype.SetEvent = function (after, action) {\r\n        this.actions.push(new EventAction(this.Time + after, action));\r\n    };\r\n    EventManager.prototype.Tick = function (time) {\r\n        this.Time = time;\r\n        for (var _i = 0, _a = this.actions; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            if (this.Time < action.FireTime) {\r\n                action.Action();\r\n                action.Done = true;\r\n            }\r\n        }\r\n        this.actions = this.actions.filter(function (x) { return x.Done === false; });\r\n    };\r\n    return EventManager;\r\n}());\r\n\r\nvar EventAction = /** @class */ (function () {\r\n    function EventAction(fireTime, action) {\r\n        this.Done = false;\r\n        this.FireTime = fireTime;\r\n        this.Action = action;\r\n    }\r\n    return EventAction;\r\n}());\r\n\n\n//# sourceURL=webpack://dxnb/./src/eventManager.ts?");

/***/ }),

/***/ "./src/frame.ts":
/*!**********************!*\
  !*** ./src/frame.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Frame\": () => (/* binding */ Frame)\n/* harmony export */ });\n/* harmony import */ var _params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./params */ \"./src/params.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar Frame = /** @class */ (function (_super) {\r\n    __extends(Frame, _super);\r\n    function Frame() {\r\n        var _this = _super.call(this) || this;\r\n        _this.Draw();\r\n        return _this;\r\n    }\r\n    Frame.prototype.Draw = function () {\r\n        this.removeAllChildren();\r\n        var color = \"black\";\r\n        var top = new createjs.Shape();\r\n        top.graphics.beginFill(color);\r\n        top.graphics.drawRect(0, 0, 50 * (_params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT + 1), _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP);\r\n        this.addChild(top);\r\n        var toge = new createjs.Shape();\r\n        toge.graphics.beginFill(\"red\");\r\n        toge.graphics.drawRect(0, _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP, 50 * (_params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT + 1), 10);\r\n        toge.alpha = 0.5;\r\n        this.addChild(toge);\r\n        var bottom = new createjs.Shape();\r\n        bottom.graphics.beginFill(color);\r\n        bottom.graphics.drawRect(0, 50 * (_params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT - 2) + 40, 50 * (_params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT + 1), 50);\r\n        this.addChild(bottom);\r\n        var left = new createjs.Shape();\r\n        left.graphics.beginFill(color);\r\n        left.graphics.drawRect(0, 0, _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT, 50 * _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT + 25);\r\n        this.addChild(left);\r\n        var right = new createjs.Shape();\r\n        right.graphics.beginFill(color);\r\n        right.graphics.drawRect(25 + 5 + (50 * _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT), 0, _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT, 50 * _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT + 25);\r\n        this.addChild(right);\r\n    };\r\n    return Frame;\r\n}(createjs.Container));\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/frame.ts?");

/***/ }),

/***/ "./src/game.ts":
/*!*********************!*\
  !*** ./src/game.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Game\": () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./params */ \"./src/params.ts\");\n/* harmony import */ var _cell__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cell */ \"./src/cell.ts\");\n/* harmony import */ var _frame__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./frame */ \"./src/frame.ts\");\n/* harmony import */ var _shadow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shadow */ \"./src/shadow.ts\");\n/* harmony import */ var _cover__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cover */ \"./src/cover.ts\");\n/* harmony import */ var _score__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./score */ \"./src/score.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _eventManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./eventManager */ \"./src/eventManager.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar Game = /** @class */ (function () {\r\n    function Game() {\r\n        this.hold = null;\r\n        this.eventManager = new _eventManager__WEBPACK_IMPORTED_MODULE_7__.EventManager();\r\n        this.progress = 0;\r\n        this.progressBySpeed = 0;\r\n        this.step = 0;\r\n        this.stepIncrement = false;\r\n        this.stopTime = 0;\r\n        this.point = 0;\r\n        this.isGameOver = false;\r\n        this.startTime = 0;\r\n        this.bonusSuit = null;\r\n        this.bonusColor = null;\r\n        this.soundSource = [\r\n            { src: \"./bgm.m4a\", id: \"bgm\" },\r\n            { src: \"./swap.mp3\", id: \"swap\" },\r\n            { src: \"./break.mp3\", id: \"break\" },\r\n        ];\r\n        this.sounds = {};\r\n        this.stage = new createjs.Stage(\"canvas\");\r\n    }\r\n    Game.prototype.Start = function () {\r\n        var _this = this;\r\n        this.initDraw();\r\n        // 音声読み込み\r\n        createjs.Sound.addEventListener(\"fileload\", function (event) {\r\n            _this.sounds[event.id] = createjs.Sound.createInstance(event.id);\r\n        });\r\n        createjs.Sound.registerSounds(this.soundSource);\r\n        // 最初のマウスクリックでTickを起動\r\n        this.cover.addEventListener(\"mousedown\", function (e) {\r\n            var _a, _b, _c;\r\n            createjs.Ticker.timingMode = createjs.Ticker.RAF;\r\n            createjs.Ticker.addEventListener(\"tick\", function (e) { _this.handleTick(e); });\r\n            (_a = _this.sounds[\"bgm\"]) === null || _a === void 0 ? void 0 : _a.setLoop(-1);\r\n            (_b = _this.sounds[\"bgm\"]) === null || _b === void 0 ? void 0 : _b.setVolume(0.3);\r\n            (_c = _this.sounds[\"bgm\"]) === null || _c === void 0 ? void 0 : _c.play();\r\n            _this.cover.UnDraw();\r\n            _this.cover.removeAllEventListeners();\r\n        });\r\n    };\r\n    //#region Tick\r\n    Game.prototype.handleTick = function (e) {\r\n        this.update(e);\r\n        this.eventManager.Tick(e.time);\r\n        this.draw(e);\r\n    };\r\n    Game.prototype.update = function (e) {\r\n        // ゲーム開始からの時間\r\n        if (this.startTime === 0) {\r\n            this.startTime = e.time;\r\n        }\r\n        var time = e.time - this.startTime;\r\n        var progressPer = time / _params__WEBPACK_IMPORTED_MODULE_0__.END_OF_TIME;\r\n        // ゲームオーバー判定\r\n        if (progressPer > 1) {\r\n            this.gameOver();\r\n        }\r\n        if (!this.isGameOver) {\r\n            var delta = Math.max(e.delta - this.stopTime, 0);\r\n            var progress_span = _params__WEBPACK_IMPORTED_MODULE_0__.PROGRESS_SPAN - (200 * progressPer);\r\n            this.stopTime = Math.max(this.stopTime - e.delta, 0);\r\n            this.progress = this.progress + Math.round(delta);\r\n            this.progressBySpeed = Math.round(this.progress / progress_span);\r\n            this.stepIncrement = (this.step !== Math.floor(this.progressBySpeed / _params__WEBPACK_IMPORTED_MODULE_0__.STEP_SPAN));\r\n            this.step = Math.floor(this.progressBySpeed / _params__WEBPACK_IMPORTED_MODULE_0__.STEP_SPAN);\r\n            if (this.stepIncrement) {\r\n                this.up();\r\n            }\r\n            // 寿命を縮める\r\n            this.decrementLife();\r\n            // ゲームオーバー判定\r\n            if (_utils__WEBPACK_IMPORTED_MODULE_6__.Utils.GetTopRowNumber(this.getCells()) === 0) {\r\n                this.gameOver();\r\n            }\r\n        }\r\n    };\r\n    Game.prototype.draw = function (e) {\r\n        // せり上げる\r\n        this.field.y = _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP - (this.progressBySpeed % _params__WEBPACK_IMPORTED_MODULE_0__.STEP_SPAN);\r\n        if (this.shadow.IsLive) {\r\n            this.shadow.Hue = this.progress;\r\n        }\r\n        this.stage.update();\r\n    };\r\n    //#endregion\r\n    //#region GameControl\r\n    // 消去判定\r\n    Game.prototype.check = function () {\r\n        var _this = this;\r\n        var cells = this.getCells();\r\n        for (var r = 0; r < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT; r++) {\r\n            var _a = _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.CheckSuit(cells[r]), suitBool = _a[0], suit = _a[1];\r\n            var _b = _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.CheckColor(cells[r]), colorBool = _b[0], color = _b[1];\r\n            if (suitBool || colorBool) {\r\n                if (cells[r][0].State === _params__WEBPACK_IMPORTED_MODULE_0__.State.Live) {\r\n                    cells[r].forEach(function (x) {\r\n                        x.State = _params__WEBPACK_IMPORTED_MODULE_0__.State.Flash;\r\n                        x.Life = 20;\r\n                        _this.stopTime += 750;\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        this.drawAll();\r\n    };\r\n    // 削除可能ブロックを消して詰める\r\n    Game.prototype.defrag = function () {\r\n        var _a;\r\n        var cells = this.getCells();\r\n        for (var r1 = _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.GetTopRowNumber(this.getCells()); r1 < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT; r1++) {\r\n            if (cells[r1][0].State === _params__WEBPACK_IMPORTED_MODULE_0__.State.Delete) {\r\n                for (var r2 = r1; r2 > 0; r2--) {\r\n                    for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n                        cells[r2][c].Override(cells[r2 - 1][c]);\r\n                    }\r\n                }\r\n                for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n                    cells[0][c].State = _params__WEBPACK_IMPORTED_MODULE_0__.State.Delete;\r\n                }\r\n                this.point++;\r\n            }\r\n        }\r\n        (_a = this.sounds[\"break\"]) === null || _a === void 0 ? void 0 : _a.play();\r\n        _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.Shake(this.field);\r\n        this.check();\r\n    };\r\n    // ボーナスブロックに変換\r\n    Game.prototype.changeBlock = function (suit, color) {\r\n        var cells = _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.GetCellArray(this.getCells());\r\n        if (suit) {\r\n            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\r\n                var cell = cells_1[_i];\r\n                cell.Suit = _params__WEBPACK_IMPORTED_MODULE_0__.Suit.Wild;\r\n            }\r\n        }\r\n        if (suit) {\r\n            for (var _a = 0, cells_2 = cells; _a < cells_2.length; _a++) {\r\n                var cell = cells_2[_a];\r\n                cell.Color = _params__WEBPACK_IMPORTED_MODULE_0__.Color.Rainbow;\r\n            }\r\n        }\r\n    };\r\n    // ブロックの繰り上げ\r\n    Game.prototype.up = function () {\r\n        var cells = this.getCells();\r\n        for (var r = 0; r < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT - 1; r++) {\r\n            for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n                cells[r][c].Override(cells[r + 1][c]);\r\n            }\r\n        }\r\n        _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.ShuffleLine(cells[_params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT - 1]);\r\n        if (this.hold) {\r\n            if (this.hold.Row === 0) {\r\n                this.hold = null;\r\n            }\r\n            else {\r\n                this.hold = cells[this.hold.Row - 1][this.hold.Column];\r\n            }\r\n        }\r\n        this.drawAll();\r\n    };\r\n    // ブロックの入れ替え\r\n    Game.prototype.swap = function (target) {\r\n        var _this = this;\r\n        var _a;\r\n        this.field.children.forEach(function (x) {\r\n            if (x instanceof _cell__WEBPACK_IMPORTED_MODULE_1__.Cell) {\r\n                x.IsHold = false;\r\n                x.Draw();\r\n            }\r\n        });\r\n        if (target.State !== _params__WEBPACK_IMPORTED_MODULE_0__.State.Live) {\r\n            return;\r\n        }\r\n        if (this.hold) {\r\n            if (this.hold !== target) {\r\n                if (this.hold.Color === target.Color || this.hold.Suit === target.Suit) {\r\n                    var color = target.Color;\r\n                    var suit = target.Suit;\r\n                    target.Color = this.hold.Color;\r\n                    target.Suit = this.hold.Suit;\r\n                    this.hold.Color = color;\r\n                    this.hold.Suit = suit;\r\n                    // 影\r\n                    this.shadow.IsLive = true;\r\n                    this.shadow.x = this.hold.x;\r\n                    this.shadow.y = this.hold.y;\r\n                    this.shadow.Hue = 0;\r\n                    this.shadow.Life = 20;\r\n                    this.eventManager.SetEvent(20, function () {\r\n                        _this.shadow.IsLive = false;\r\n                    });\r\n                    createjs.Tween.get(this.shadow)\r\n                        .to({ x: target.x, y: target.y }, 100);\r\n                    this.check();\r\n                    (_a = this.sounds[\"swap\"]) === null || _a === void 0 ? void 0 : _a.play();\r\n                }\r\n            }\r\n            this.hold.IsHold = false;\r\n            this.hold = null;\r\n        }\r\n        else {\r\n            this.hold = target;\r\n            this.hold.IsHold = true;\r\n        }\r\n        this.drawAll();\r\n    };\r\n    // ゲームオーバー\r\n    Game.prototype.gameOver = function () {\r\n        var _a;\r\n        this.isGameOver = true;\r\n        (_a = this.sounds[\"bgm\"]) === null || _a === void 0 ? void 0 : _a.stop();\r\n        this.score.Draw(this.point);\r\n    };\r\n    //#endregion\r\n    //#region Util\r\n    Game.prototype.getCells = function () {\r\n        var cells = [];\r\n        var _loop_1 = function (r) {\r\n            var _loop_2 = function (c) {\r\n                var cell = this_1.field.children.find(function (x) { return x instanceof _cell__WEBPACK_IMPORTED_MODULE_1__.Cell && x.Row === r && x.Column === c; });\r\n                if (!cells[r]) {\r\n                    cells[r] = [];\r\n                }\r\n                cells[r][c] = cell;\r\n            };\r\n            for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n                _loop_2(c);\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var r = 0; r < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT; r++) {\r\n            _loop_1(r);\r\n        }\r\n        return cells;\r\n    };\r\n    // 寿命を縮める\r\n    Game.prototype.decrementLife = function () {\r\n        var def = false;\r\n        _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.GetCellArray(this.getCells()).forEach(function (cell) {\r\n            if (cell.State === _params__WEBPACK_IMPORTED_MODULE_0__.State.Flash) {\r\n                cell.Life--;\r\n                if (cell.Life <= 0) {\r\n                    cell.State = _params__WEBPACK_IMPORTED_MODULE_0__.State.Delete;\r\n                    def = true;\r\n                }\r\n            }\r\n        });\r\n        if (this.shadow.IsLive) {\r\n            this.shadow.Life--;\r\n        }\r\n        if (def) {\r\n            this.defrag();\r\n        }\r\n    };\r\n    //#endregion\r\n    //#region Draw\r\n    // 初期描画\r\n    Game.prototype.initDraw = function () {\r\n        var _this = this;\r\n        var field = new createjs.Container();\r\n        field.name = \"field\";\r\n        this.field = field;\r\n        this.field.x = _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT;\r\n        this.field.y = _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP;\r\n        for (var r = 0; r < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT; r++) {\r\n            for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n                var color = Math.floor(Math.random() * 3);\r\n                var suit = Math.floor(Math.random() * 4);\r\n                var cell = new _cell__WEBPACK_IMPORTED_MODULE_1__.Cell(suit, color);\r\n                cell.Row = r;\r\n                cell.Column = c;\r\n                cell.x = c * 50;\r\n                cell.y = r * 50;\r\n                if (r < 5) {\r\n                    cell.State = _params__WEBPACK_IMPORTED_MODULE_0__.State.Delete;\r\n                }\r\n                cell.addEventListener(\"mousedown\", function (e) {\r\n                    _this.onClick(e);\r\n                });\r\n                field.addChild(cell);\r\n            }\r\n        }\r\n        this.shadow = new _shadow__WEBPACK_IMPORTED_MODULE_3__.Shadow();\r\n        field.addChild(this.shadow);\r\n        this.cover = new _cover__WEBPACK_IMPORTED_MODULE_4__.Cover();\r\n        this.score = new _score__WEBPACK_IMPORTED_MODULE_5__.Score();\r\n        this.stage.addChild(field);\r\n        this.stage.addChild(new _frame__WEBPACK_IMPORTED_MODULE_2__.Frame());\r\n        this.stage.addChild(this.cover);\r\n        this.stage.addChild(this.score);\r\n        this.drawAll();\r\n        this.stage.update();\r\n    };\r\n    Game.prototype.drawAll = function () {\r\n        _utils__WEBPACK_IMPORTED_MODULE_6__.Utils.GetCellArray(this.getCells()).forEach(function (cell) {\r\n            cell.Draw();\r\n        });\r\n    };\r\n    //#endregion\r\n    //#region Events\r\n    Game.prototype.onClick = function (e) {\r\n        var _a, _b, _c, _d;\r\n        var target = e.currentTarget;\r\n        if (!this.isGameOver) {\r\n            if (((_a = this.sounds[\"bgm\"]) === null || _a === void 0 ? void 0 : _a.getPosition()) === 0) {\r\n                (_b = this.sounds[\"bgm\"]) === null || _b === void 0 ? void 0 : _b.setVolume(0.3);\r\n                (_c = this.sounds[\"bgm\"]) === null || _c === void 0 ? void 0 : _c.setLoop(-1);\r\n                (_d = this.sounds[\"bgm\"]) === null || _d === void 0 ? void 0 : _d.play();\r\n            }\r\n            this.swap(target);\r\n        }\r\n    };\r\n    return Game;\r\n}());\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/game.ts?");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game */ \"./src/game.ts\");\n\r\nfunction main() {\r\n    var game = new _game__WEBPACK_IMPORTED_MODULE_0__.Game();\r\n    game.Start();\r\n}\r\nmain();\r\n\n\n//# sourceURL=webpack://dxnb/./src/main.ts?");

/***/ }),

/***/ "./src/params.ts":
/*!***********************!*\
  !*** ./src/params.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Suit\": () => (/* binding */ Suit),\n/* harmony export */   \"Color\": () => (/* binding */ Color),\n/* harmony export */   \"State\": () => (/* binding */ State),\n/* harmony export */   \"MAX_ROW_COUNT\": () => (/* binding */ MAX_ROW_COUNT),\n/* harmony export */   \"MAX_COLUMN_COUNT\": () => (/* binding */ MAX_COLUMN_COUNT),\n/* harmony export */   \"PROGRESS_SPAN\": () => (/* binding */ PROGRESS_SPAN),\n/* harmony export */   \"STEP_SPAN\": () => (/* binding */ STEP_SPAN),\n/* harmony export */   \"FRAME_TOP\": () => (/* binding */ FRAME_TOP),\n/* harmony export */   \"FRAME_LEFT\": () => (/* binding */ FRAME_LEFT),\n/* harmony export */   \"END_OF_TIME\": () => (/* binding */ END_OF_TIME)\n/* harmony export */ });\nvar Suit;\r\n(function (Suit) {\r\n    Suit[Suit[\"North\"] = 0] = \"North\";\r\n    Suit[Suit[\"East\"] = 1] = \"East\";\r\n    Suit[Suit[\"West\"] = 2] = \"West\";\r\n    Suit[Suit[\"South\"] = 3] = \"South\";\r\n    Suit[Suit[\"Wild\"] = 4] = \"Wild\";\r\n})(Suit || (Suit = {}));\r\nvar Color;\r\n(function (Color) {\r\n    Color[Color[\"Red\"] = 0] = \"Red\";\r\n    Color[Color[\"Green\"] = 1] = \"Green\";\r\n    Color[Color[\"Blue\"] = 2] = \"Blue\";\r\n    Color[Color[\"Rainbow\"] = 3] = \"Rainbow\";\r\n})(Color || (Color = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Live\"] = 0] = \"Live\";\r\n    State[State[\"Flash\"] = 1] = \"Flash\";\r\n    State[State[\"Delete\"] = 2] = \"Delete\";\r\n})(State || (State = {}));\r\nvar MAX_ROW_COUNT = 11;\r\nvar MAX_COLUMN_COUNT = 5;\r\nvar PROGRESS_SPAN = 300;\r\nvar STEP_SPAN = 50;\r\nvar FRAME_TOP = 25;\r\nvar FRAME_LEFT = 25;\r\nvar END_OF_TIME = 60 * 1000;\r\n\n\n//# sourceURL=webpack://dxnb/./src/params.ts?");

/***/ }),

/***/ "./src/score.ts":
/*!**********************!*\
  !*** ./src/score.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Score\": () => (/* binding */ Score)\n/* harmony export */ });\n/* harmony import */ var _params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./params */ \"./src/params.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar Score = /** @class */ (function (_super) {\r\n    __extends(Score, _super);\r\n    function Score() {\r\n        var _this = _super.call(this) || this;\r\n        _this.UnDraw();\r\n        return _this;\r\n    }\r\n    Score.prototype.Draw = function (point) {\r\n        this.removeAllChildren();\r\n        var color = \"black\";\r\n        var cover = new createjs.Shape();\r\n        cover.graphics.beginFill(color);\r\n        cover.graphics.drawRect(0, 0, 300, 535);\r\n        cover.alpha = 0.5;\r\n        var word = new createjs.Text(\"\" + point, \"48px serif\", \"White\");\r\n        word.textAlign = \"center\";\r\n        word.x = (50 * (_params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT + 1)) / 2;\r\n        word.y = (50 * (_params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT - 1)) / 2;\r\n        this.addChild(cover);\r\n        this.addChild(word);\r\n    };\r\n    Score.prototype.UnDraw = function () {\r\n        this.removeAllChildren();\r\n    };\r\n    return Score;\r\n}(createjs.Container));\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/score.ts?");

/***/ }),

/***/ "./src/shadow.ts":
/*!***********************!*\
  !*** ./src/shadow.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Shadow\": () => (/* binding */ Shadow)\n/* harmony export */ });\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar Shadow = /** @class */ (function (_super) {\r\n    __extends(Shadow, _super);\r\n    function Shadow() {\r\n        var _this = _super.call(this) || this;\r\n        _this._isLive = false;\r\n        _this._hue = 0;\r\n        _this._life = 0;\r\n        _this.Draw();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Shadow.prototype, \"Life\", {\r\n        get: function () {\r\n            return this._life;\r\n        },\r\n        set: function (value) {\r\n            this._life = value;\r\n            if (this._life <= 0) {\r\n                this.IsLive = false;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Shadow.prototype, \"IsLive\", {\r\n        get: function () {\r\n            return this._isLive;\r\n        },\r\n        set: function (value) {\r\n            this._isLive = value;\r\n            this.Draw();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Shadow.prototype, \"Hue\", {\r\n        set: function (value) {\r\n            this._hue = value;\r\n            if (this._isLive) {\r\n                this.shape.graphics.beginFill(createjs.Graphics.getHSL(this._hue, 50, 50));\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Shadow.prototype.Draw = function () {\r\n        this.removeAllChildren();\r\n        if (this._isLive) {\r\n            var shape1 = new createjs.Shape();\r\n            shape1.graphics.beginFill(createjs.Graphics.getHSL(this._hue, 50, 50));\r\n            shape1.graphics.drawRoundRect(5, 5, 45, 45, 5);\r\n            shape1.alpha = 0.3;\r\n            this.shape = shape1;\r\n            this.children.push(shape1);\r\n        }\r\n    };\r\n    return Shadow;\r\n}(createjs.Container));\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/shadow.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Utils\": () => (/* binding */ Utils)\n/* harmony export */ });\n/* harmony import */ var _params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./params */ \"./src/params.ts\");\n\r\nvar Utils = /** @class */ (function () {\r\n    function Utils() {\r\n    }\r\n    // Suitの消去判定\r\n    Utils.CheckSuit = function (row) {\r\n        var min = Math.min.apply(null, row.filter(function (x) { return x.Suit !== _params__WEBPACK_IMPORTED_MODULE_0__.Suit.Wild; }).map(function (x) { return x.Suit; }));\r\n        var max = Math.max.apply(null, row.filter(function (x) { return x.Suit !== _params__WEBPACK_IMPORTED_MODULE_0__.Suit.Wild; }).map(function (x) { return x.Suit; }));\r\n        return [min === max, min];\r\n    };\r\n    // Colorの消去判定\r\n    Utils.CheckColor = function (row) {\r\n        var min = Math.min.apply(null, row.filter(function (x) { return x.Suit !== _params__WEBPACK_IMPORTED_MODULE_0__.Suit.Wild; }).map(function (x) { return x.Color; }));\r\n        var max = Math.max.apply(null, row.filter(function (x) { return x.Color !== _params__WEBPACK_IMPORTED_MODULE_0__.Color.Rainbow; }).map(function (x) { return x.Color; }));\r\n        return [min === max, min];\r\n    };\r\n    // 列をシャッフル\r\n    Utils.ShuffleLine = function (line) {\r\n        for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n            var color = Math.floor(Math.random() * 3);\r\n            var suit = Math.floor(Math.random() * 4);\r\n            line[c].Color = color;\r\n            line[c].Suit = suit;\r\n        }\r\n    };\r\n    // 一番上の行を返す\r\n    Utils.GetTopRowNumber = function (cells) {\r\n        for (var r = 0; r < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT; r++) {\r\n            if (cells[r][0].State !== _params__WEBPACK_IMPORTED_MODULE_0__.State.Delete) {\r\n                return r;\r\n            }\r\n        }\r\n        return _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT - 1;\r\n    };\r\n    // 二次元のCell配列を1次元に\r\n    Utils.GetCellArray = function (cells) {\r\n        var cellArray = [];\r\n        for (var r = 0; r < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_ROW_COUNT; r++) {\r\n            for (var c = 0; c < _params__WEBPACK_IMPORTED_MODULE_0__.MAX_COLUMN_COUNT; c++) {\r\n                cellArray.push(cells[r][c]);\r\n            }\r\n        }\r\n        return cellArray;\r\n    };\r\n    // 要素を揺らす\r\n    Utils.Shake = function (con) {\r\n        createjs.Tween.get(con)\r\n            .to({ x: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT + 1, y: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP + 1, }, 50)\r\n            .to({ x: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT - 1, y: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP - 1, }, 50)\r\n            .to({ x: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT + 1, y: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP + 0, }, 50)\r\n            .to({ x: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT + 0, y: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP + 1, }, 50)\r\n            .to({ x: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT - 1, y: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP - 1, }, 50)\r\n            .to({ x: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_LEFT + 0, y: _params__WEBPACK_IMPORTED_MODULE_0__.FRAME_TOP + 0, }, 50);\r\n    };\r\n    return Utils;\r\n}());\r\n\r\n\n\n//# sourceURL=webpack://dxnb/./src/utils.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;